<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="GENERATOR" content="GNU source-highlight 3.1.9
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite">
<title>IERC20Receiver.sol</title>
</head>
<body bgcolor="white">
<pre><tt><i><font color="#9A1900">// SPDX-License-Identifier: GPL-3.0-or-later</font></i>

<font color="#008080">pragma</font> solidity <font color="#990000">^</font><font color="#993399">0.8</font><font color="#990000">.</font><font color="#993399">0</font><font color="#990000">;</font>

<i><font color="#9A1900">/**</font></i>
<i><font color="#9A1900"> * </font></i><font color="#009900">@title</font><i><font color="#9A1900"> ERC20 token receiver interface</font></i>
<i><font color="#9A1900"> * </font></i><font color="#009900">@dev</font><i><font color="#9A1900"> Interface for any contract that wants to support safeTransfers</font></i>
<i><font color="#9A1900"> * from ERC20 asset contracts.  Based on the IERC721Receiver code.</font></i>
<i><font color="#9A1900"> */</font></i>
<font color="#008080">interface</font> IERC20Receiver <font color="#FF0000">{</font>
    <i><font color="#9A1900">/**</font></i>
<i><font color="#9A1900">     * </font></i><font color="#009900">@dev</font><i><font color="#9A1900"> Whenever an {IERC20} amount is transferred to this contract from `from`, this function is called.</font></i>
<i><font color="#9A1900">     *</font></i>
<i><font color="#9A1900">     * It must return true to confirm the token transfer.</font></i>
<i><font color="#9A1900">     * If false is returned the transfer will be reverted.</font></i>
<i><font color="#9A1900">     *</font></i>
<i><font color="#9A1900">     * The selector can be obtained in Solidity with `IERC20Receiver.onERC20Received.selector`.</font></i>
<i><font color="#9A1900">     */</font></i>
    <font color="#008080">function</font> <b><font color="#000000">onERC20Received</font></b><font color="#990000">(</font><font color="#008080">address</font> from<font color="#990000">,</font> <font color="#008080">uint</font> amount<font color="#990000">,</font> <font color="#008080">address</font> erc20<font color="#990000">)</font> <font color="#008080">external</font> <b><font color="#000000">returns</font></b> <font color="#990000">(</font><font color="#009900">bool</font><font color="#990000">);</font>
<font color="#FF0000">}</font>

<i><font color="#9A1900">/* to use this code, put the following in your ERC-20 sub-class implementation:</font></i>

<i><font color="#9A1900">    function _update(address from, address to, uint256 value) internal override virtual {</font></i>
<i><font color="#9A1900">        ERC20._update(from,to,value);</font></i>
<i><font color="#9A1900">        afterTokenTransfer(from,to,value);</font></i>
<i><font color="#9A1900">    }</font></i>

<i><font color="#9A1900">    function afterTokenTransfer(address from, address to, uint256 amount) internal {</font></i>
<i><font color="#9A1900">        if ( to.code.length &gt; 0  &amp;&amp; from != address(0) &amp;&amp; to != address(0) ) {</font></i>
<i><font color="#9A1900">            // token recipient is a contract, notify them</font></i>
<i><font color="#9A1900">            try IERC20Receiver(to).onERC20Received(from, amount, address(this)) returns (bool success) {</font></i>
<i><font color="#9A1900">                require(success,"ERC-20 receipt rejected by destination of transfer");</font></i>
<i><font color="#9A1900">            } catch {</font></i>
<i><font color="#9A1900">                // the notification failed (maybe they don't implement the `IERC20Receiver` interface?)</font></i>
<i><font color="#9A1900">                // we choose to silently ignore this case</font></i>
<i><font color="#9A1900">            }</font></i>
<i><font color="#9A1900">        }</font></i>
<i><font color="#9A1900">    }</font></i>

<i><font color="#9A1900">*/</font></i>
</tt></pre>
</body>
</html>
